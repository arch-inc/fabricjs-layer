(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5470:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return v}});var i=a(9892),n=a(8038),r=a(7378),c=a(3198),l=a.n(c),t=a(4246),o=function(e){var s=e.erasing,i=e.brushColor,n=e.onAppInit,c=(0,r.useRef)(),l=(0,r.useMemo)((function(){return(0,t.jsx)("canvas",{ref:c,width:"720",height:"480"})}),[]),o=(0,r.useState)(null),d=o[0],u=o[1];return(0,r.useEffect)((function(){var e;if(window&&c.current)return Promise.all([a.e(298),a.e(905),a.e(278)]).then(a.bind(a,7515)).then((function(s){var a=s.App;e=new a(c.current),u(e)})),function(){return e&&e.dispose()}}),[c.current]),(0,r.useEffect)((function(){d&&d.initialized&&n&&n(d)}),[d,n]),(0,r.useEffect)((function(){d&&(d.erasing=s)}),[d,s]),(0,r.useEffect)((function(){d&&(d.brushColor=i)}),[d,i]),l},d=function(e){var s=e.label,a=e.layer,i=e.active,n=e.onLayerSelect,c=(0,r.useState)(null),l=c[0],o=c[1];(0,r.useEffect)((function(){if(a){var e={onObjectAdd:function(e){s(),console.log("object:add",e)},onObjectRemove:function(e){s(),console.log("object:remove",e)}};return s(),a.addListener(e),function(){a.removeListener(e)}}function s(){var e=a.endIndex-a.startIndex;o("".concat(a.startIndex,"~").concat(a.endIndex,"; ").concat(e," obj").concat(e>1?"s":""))}}),[a]);var d=(0,r.useCallback)((function(){return n&&n(a)}),[a,n]);return(0,t.jsxs)("div",{className:"item",onClick:d,children:[i&&(0,t.jsx)("i",{className:"check icon"}),(0,t.jsxs)("div",{className:"content",children:[s," (",l||"-",")"]})]})},u=function(e){var s=e.app,a=(0,r.useState)(null),i=a[0],n=a[1],c=(0,r.useState)(null),l=c[0],o=c[1];(0,r.useEffect)((function(){if(s){var e={onLayerAdd:function(e){console.log("layer:add",e),s.layerManager.activeLayer=e.layer,o(s.layerManager.layers)},onLayerRemove:function(e){console.log("layer:remove",e),o(s.layerManager.layers)},onLayerMove:function(e){console.log("layer:move",e),o(s.layerManager.layers)},onLayerActivated:function(e){console.log("layer:activated",e),n(e.layer)}};return s.layerManager.addListener(e),o(s.layerManager.layers),n(s.layerManager.activeLayer),function(){(null===s||void 0===s?void 0:s.layerManager)&&s.layerManager.removeListener(e)}}}),[s]);var u=(0,r.useCallback)((function(e){s&&(s.layerManager.activeLayer=e)}),[s]),x=(0,r.useMemo)((function(){return l?l.reverse():null}),[l]);return(0,t.jsx)("div",{className:"ui middle aligned selection list",children:x?x.map((function(e,s){return(0,t.jsx)(d,{label:"Layer ".concat(e.createdTime),layer:e,active:e===i,onLayerSelect:u},s)})):(0,t.jsx)("div",{className:"item",children:"No layer available"})})},x=a(1798),j="ui labeled icon primary button",m="ui labeled icon button",h=function(e){var s=e.erasing,a=e.color,n=e.onErasingSet,c=e.onColorUpdate,l=(0,r.useState)(!1),o=l[0],d=l[1],u=(0,r.useCallback)((function(e){var s=e.target.classList;s.contains("modal")||s.contains("color-button")?d(!o):console.log("ignore event from",e.target)}),[o]),h=(0,r.useCallback)((function(){return n(!1)}),[]),f=(0,r.useCallback)((function(){return n(!0)}),[]);return(0,t.jsxs)("div",{className:"jsx-3227548263 ui horizontal list",children:[(0,t.jsx)(i.default,{id:"3227548263",children:[".modal{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:14px;}",".modal > div{max-width:960px;margin:2em auto;}"]}),(0,t.jsx)("div",{className:"jsx-3227548263 item",children:(0,t.jsx)(x.Eo,{onClick:u,borderColor:a,children:"Brush color"})}),(0,t.jsx)("div",{className:"jsx-3227548263 item",children:(0,t.jsxs)("div",{className:"jsx-3227548263 ui buttons",children:[(0,t.jsxs)("button",{onClick:h,className:"jsx-3227548263 "+((s?m:j)||""),children:[(0,t.jsx)("i",{className:"jsx-3227548263 paint brush icon"}),"Brush"]}),(0,t.jsxs)("button",{onClick:f,className:"jsx-3227548263 "+((s?j:m)||""),children:[(0,t.jsx)("i",{className:"jsx-3227548263 eraser icon"}),"Eraser"]}),o&&(0,t.jsx)(x.Pz,{className:"modal",onClick:u,style:{backgroundColor:"rgba(0,0,0,0.3)",overflow:"auto"},children:(0,t.jsx)(x.nu,{raised:!0,color:a,onColorUpdate:c})})]})})]})},f=function(){var e=(0,r.useState)(!1),s=e[0],a=e[1],n=(0,r.useState)(new(l())("#000")),c=n[0],d=n[1],x=(0,r.useState)(null),j=x[0],m=x[1],f=(0,r.useCallback)((function(){j&&j.layerManager.addLayer()}),[j]),v=(0,r.useCallback)((function(){j&&(j.layerManager.activeLayerIndex>=j.layerManager.layersLength-1?console.log("specified layer is the most foreground"):j.layerManager.moveLayer(j.layerManager.activeLayerIndex,j.layerManager.activeLayerIndex+1))}),[j]),g=(0,r.useCallback)((function(){j&&(j.layerManager.activeLayerIndex<=0?console.log("specified layer is the most background"):j.layerManager.moveLayer(j.layerManager.activeLayerIndex,j.layerManager.activeLayerIndex-1))}),[j]),b=(0,r.useMemo)((function(){return c.toHexString()}),[c]);return(0,t.jsxs)("div",{className:"jsx-2908267827 canvas-wrapper",children:[(0,t.jsx)(i.default,{id:"2908267827",children:["div.canvas-wrapper.jsx-2908267827{background:#f5f5f5;margin:2em auto 0 auto;padding:2em 0;}","div.canvas.jsx-2908267827{margin-top:1em;text-align:center;overflow:hidden;}","div.canvas.jsx-2908267827 .canvas-container{margin:auto;border:1px solid #eee;background:#fff;}","div.sidebar.jsx-2908267827{padding:1em;}","div.add.button.jsx-2908267827{margin-bottom:1em;}"]}),(0,t.jsxs)("div",{className:"jsx-2908267827 ui container",children:[(0,t.jsx)("h3",{className:"jsx-2908267827 ui header",children:"Live demo"}),(0,t.jsxs)("p",{className:"jsx-2908267827",children:["A simple drawing app with layer support. (Eraser would NOT work as intended due to the Fabric.js specification. It is utilizing"," ",(0,t.jsx)("code",{className:"jsx-2908267827",children:"globalCompositeOperation"}),".)"]}),(0,t.jsx)("div",{className:"jsx-2908267827 ui divider"})]}),(0,t.jsxs)("div",{className:"jsx-2908267827 ui stackable grid",children:[(0,t.jsx)("div",{className:"jsx-2908267827 twelve wide column",children:(0,t.jsxs)("div",{className:"jsx-2908267827 ui center aligned basic segment",children:[(0,t.jsx)(h,{erasing:s,color:c,onErasingSet:a,onColorUpdate:d}),(0,t.jsx)("div",{className:"jsx-2908267827 canvas",children:(0,t.jsx)(o,{erasing:s,brushColor:b,onAppInit:m})})]})}),(0,t.jsx)("div",{className:"jsx-2908267827 four wide column",children:(0,t.jsxs)("div",{className:"jsx-2908267827 sidebar",children:[(0,t.jsxs)("h4",{className:"jsx-2908267827 ui dividing header",children:[(0,t.jsx)("i",{className:"jsx-2908267827 list icon"}),(0,t.jsx)("div",{className:"jsx-2908267827 content",children:"Layers"})]}),(0,t.jsxs)("div",{className:"jsx-2908267827 ui list",children:[(0,t.jsx)("div",{className:"jsx-2908267827 item",children:(0,t.jsxs)("button",{onClick:f,className:"jsx-2908267827 ui labeled icon fluid mini add button",children:[(0,t.jsx)("i",{className:"jsx-2908267827 plus icon"}),"Add layer"]})}),(0,t.jsx)("div",{className:"jsx-2908267827 item",children:(0,t.jsxs)("div",{className:"jsx-2908267827 ui fluid buttons",children:[(0,t.jsx)("button",{onClick:v,className:"jsx-2908267827 ui icon mini button",children:(0,t.jsx)("i",{className:"jsx-2908267827 arrow up icon"})}),(0,t.jsx)("button",{onClick:g,className:"jsx-2908267827 ui icon mini button",children:(0,t.jsx)("i",{className:"jsx-2908267827 arrow down icon"})})]})})]}),(0,t.jsx)(u,{app:j})]})})]})]})},v=function(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.default,{children:[(0,t.jsx)("title",{className:"jsx-1219986049",children:"fabricjs-layer | A lightweight pressure-sensitive brush implementation for Fabric.js"},"title"),(0,t.jsx)("link",{rel:"stylesheet",type:"text/css",href:"https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.4/dist/semantic.min.css",className:"jsx-1219986049"})]}),(0,t.jsx)(i.default,{id:"1219986049",children:["html,body{background:#eee;}","div.hero.jsx-1219986049{padding:3em 0;}","div.main.content.jsx-1219986049{background:#fff;padding:2em 0 0 0;}","footer.jsx-1219986049{padding:2em 0;}"]}),(0,t.jsx)("div",{className:"jsx-1219986049 hero",children:(0,t.jsx)("div",{className:"jsx-1219986049 ui container",children:(0,t.jsx)("h1",{className:"jsx-1219986049 ui header",children:(0,t.jsxs)("div",{className:"jsx-1219986049 content",children:["fabricjs-layer",(0,t.jsx)("div",{className:"jsx-1219986049 sub header",children:"A simple layer implementation for Fabric.js"})]})})})}),(0,t.jsxs)("div",{className:"jsx-1219986049 main content",children:[(0,t.jsxs)("div",{className:"jsx-1219986049 ui container",children:[(0,t.jsxs)("div",{className:"jsx-1219986049 ui message",children:[(0,t.jsx)("div",{className:"jsx-1219986049 header",children:"How to install"}),(0,t.jsx)("pre",{className:"jsx-1219986049",children:"npm i @arch-inc/fabricjs-layer"}),(0,t.jsx)("p",{className:"jsx-1219986049",children:"For more details on how to use this library, please refer to the following documents."})]}),(0,t.jsxs)("div",{className:"jsx-1219986049 ui selection divided list",children:[(0,t.jsxs)("a",{href:"https://github.com/arch-inc/fabricjs-layer/packages/",className:"jsx-1219986049 item",children:[(0,t.jsx)("i",{className:"jsx-1219986049 npm icon"}),(0,t.jsxs)("div",{className:"jsx-1219986049 content",children:[(0,t.jsx)("div",{className:"jsx-1219986049 header",children:"GitHub package registry"}),(0,t.jsx)("div",{className:"jsx-1219986049 description",children:"@arch-inc/fabricjs-layer"})]})]}),(0,t.jsxs)("a",{href:"https://github.com/arch-inc/fabricjs-layer",className:"jsx-1219986049 item",children:[(0,t.jsx)("i",{className:"jsx-1219986049 github icon"}),(0,t.jsxs)("div",{className:"jsx-1219986049 content",children:[(0,t.jsx)("div",{className:"jsx-1219986049 header",children:"GitHub repository"}),(0,t.jsx)("div",{className:"jsx-1219986049 description",children:"@arch-inc/fabricjs-layer"})]})]}),(0,t.jsxs)("a",{href:"https://arch-inc.github.io/fabricjs-layer/api/globals.html",className:"jsx-1219986049 item",children:[(0,t.jsx)("i",{className:"jsx-1219986049 file alternate outline icon"}),(0,t.jsxs)("div",{className:"jsx-1219986049 content",children:[(0,t.jsx)("div",{className:"jsx-1219986049 header",children:"API document"}),(0,t.jsx)("div",{className:"jsx-1219986049 description",children:"automatically generated with TypeDoc"})]})]})]})]}),(0,t.jsx)(f,{})]}),(0,t.jsx)("footer",{className:"jsx-1219986049",children:(0,t.jsx)("div",{className:"jsx-1219986049 ui container",children:(0,t.jsxs)("div",{className:"jsx-1219986049 ui horizontal divided list",children:[(0,t.jsxs)("div",{className:"jsx-1219986049 item",children:["\xa9 ",(0,t.jsx)("a",{href:"//research.archinc.jp",className:"jsx-1219986049",children:"Arch Inc."})," 2021"]}),(0,t.jsx)("div",{className:"jsx-1219986049 item",children:(0,t.jsxs)("a",{href:"https://github.com/arch-inc/fabricjs-layer",className:"jsx-1219986049",children:[(0,t.jsx)("i",{className:"jsx-1219986049 github icon"})," arch-inc/fabricjs-layer"]})})]})})})]})}},4423:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(5470)}])}},function(e){e.O(0,[774,781,888,179],(function(){return s=4423,e(e.s=s);var s}));var s=e.O();_N_E=s}]);